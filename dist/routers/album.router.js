"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.albumRouter = void 0;
const express_1 = require("express");
const middlewares_1 = require("../middlewares");
const controllers_1 = require("../controllers");
const schemas_1 = require("../schemas");
exports.albumRouter = (0, express_1.Router)();
// const albumController = new AlbumController();
exports.albumRouter.get("", middlewares_1.auth.isAuthenticated, middlewares_1.auth.isAdmin, controllers_1.albumController.list);
exports.albumRouter.post("", middlewares_1.ensure.bodyIsValid(schemas_1.albumBodyCreateSchema), controllers_1.albumController.create);
exports.albumRouter.use("/:albumId/tracks", middlewares_1.ensureAlbum.idExists);
exports.albumRouter.get("/:albumId/tracks", controllers_1.trackController.listByAlbumId);
exports.albumRouter.post("/:albumId/tracks", middlewares_1.ensure.bodyIsValid(schemas_1.trackBodySchema), controllers_1.trackController.create);
